<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>All Messages - Royal Grand Hotel</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta
      content="Premium Multipurpose Admin & Dashboard Template"
      name="description"
    />
    <meta content="" name="author" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- App favicon -->
    <link rel="shortcut icon" href="assets/images/favicon.ico" />

    <!-- DataTables -->
    <link
      href="plugins/datatables/dataTables.bootstrap4.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link
      href="plugins/datatables/buttons.bootstrap4.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <!-- Responsive datatable examples -->
    <link
      href="plugins/datatables/responsive.bootstrap4.min.css"
      rel="stylesheet"
      type="text/css"
    />

    <!-- App css -->
    <link
      href="assets/css/bootstrap.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link href="assets/css/jquery-ui.min.css" rel="stylesheet" />
    <link href="assets/css/icons.min.css" rel="stylesheet" type="text/css" />
    <link
      href="assets/css/metisMenu.min.css"
      rel="stylesheet"
      type="text/css"
    />
    <link href="assets/css/app.min.css" rel="stylesheet" type="text/css" />
  </head>

  <body>
    <!-- Top Bar Start -->
    <div class="topbar">
      <!-- LOGO -->
      <div class="topbar-left">
        <a href="dashboard/crm-index.html" class="logo">
          <span>
            <img
              src="assets/images/logo-sm.png"
              alt="logo-small"
              class="logo-sm"
            />
          </span>
          <span>
            <img
              src="assets/images/logo.png"
              alt="logo-large"
              class="logo-lg logo-light"
            />
          </span>
        </a>
      </div>
      <!--end logo-->
      <!-- Navbar -->
      <nav class="navbar-custom">
        <ul class="list-unstyled topbar-nav float-right mb-0">
          <li class="dropdown">
            <a
              class="nav-link dropdown-toggle waves-effect waves-light nav-user"
              data-toggle="dropdown"
              href="#"
              role="button"
              aria-haspopup="false"
              aria-expanded="false"
            >
              <img
                src="assets/images/users/user-1.png"
                alt="profile-user"
                class="rounded-circle"
              />
              <span class="ml-1 nav-user-name hidden-sm"
                >Amelia <i class="mdi mdi-chevron-down"></i>
              </span>
            </a>
            <div class="dropdown-menu dropdown-menu-right">
              <a class="dropdown-item" href="#"
                ><i class="ti-user text-muted mr-2"></i> Profile Edit</a
              >

              <div class="dropdown-divider mb-0"></div>
              <a class="dropdown-item" href="#"
                ><i class="ti-power-off text-muted mr-2"></i> Logout</a
              >
            </div>
          </li>
        </ul>
        <!--end topbar-nav-->
      </nav>
      <!-- end navbar-->
    </div>
    <!-- Top Bar End -->

    <!-- Left Sidenav -->
    <div class="left-sidenav">
      <ul class="metismenu left-sidenav-menu">
        <li>
          <a href="dashboard.html"
            ><i class="ti-bar-chart"></i><span>Dashboard</span></a
          >
        </li>

        <li>
          <a href="javascript: void(0);"
            ><i class="ti-calendar"></i><span>Rooms</span
            ><span class="menu-arrow"
              ><i class="mdi mdi-chevron-right"></i></span
          ></a>
          <ul class="nav-second-level" aria-expanded="false">
            <li class="nav-item">
              <a class="nav-link" href="all-rooms.html"
                ><i class="ti-control-record"></i>All Rooms</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="room-categories.html"
                ><i class="ti-control-record"></i>Room Categories</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="room-facilities.html"
                ><i class="ti-control-record"></i>Room Facilities</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="add-room.html"
                ><i class="ti-control-record"></i>Add New Room</a
              >
            </li>
          </ul>
        </li>

        <li>
          <a href="javascript: void(0);"
            ><i class="ti-bookmark"></i><span>Bookings</span
            ><span class="menu-arrow"
              ><i class="mdi mdi-chevron-right"></i></span
          ></a>
          <ul class="nav-second-level" aria-expanded="false">
            <li class="nav-item">
              <a class="nav-link" href="all-bookings.html"
                ><i class="ti-control-record"></i>All Bookings</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="add-booking.html"
                ><i class="ti-control-record"></i>Add Bookings</a
              >
            </li>
          </ul>
        </li>

        <li>
          <a href="javascript: void(0);"
            ><i class="ti-harddrive"></i><span>Foods</span
            ><span class="menu-arrow"
              ><i class="mdi mdi-chevron-right"></i></span
          ></a>
          <ul class="nav-second-level" aria-expanded="false">
            <li class="nav-item">
              <a class="nav-link" href="all-foods.html"
                ><i class="ti-control-record"></i>All Foods</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="food-categories.html"
                ><i class="ti-control-record"></i>Food Categories</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="add-foods.html"
                ><i class="ti-control-record"></i>Add Foods</a
              >
            </li>
          </ul>
        </li>

        <li>
          <a href="javascript: void(0);"
            ><i class="ti-archive"></i><span>Food Orders</span
            ><span class="menu-arrow"
              ><i class="mdi mdi-chevron-right"></i></span
          ></a>
          <ul class="nav-second-level" aria-expanded="false">
            <li class="nav-item">
              <a class="nav-link" href="food-orders.html"
                ><i class="ti-control-record"></i>All Orders</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="new-order.html"
                ><i class="ti-control-record"></i>Add Order</a
              >
            </li>
          </ul>
        </li>

        <li>
          <a href="javascript: void(0);"
            ><i class="ti-face-smile"></i><span>Customers</span
            ><span class="menu-arrow"
              ><i class="mdi mdi-chevron-right"></i></span
          ></a>
          <ul class="nav-second-level" aria-expanded="false">
            <li class="nav-item">
              <a class="nav-link" href="all-customers.html"
                ><i class="ti-control-record"></i>All Customers</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="add-customer.html"
                ><i class="ti-control-record"></i>Add Customer</a
              >
            </li>
          </ul>
        </li>

        <li>
          <a href="javascript: void(0);"
            ><i class="ti-bag"></i><span>Employees</span
            ><span class="menu-arrow"
              ><i class="mdi mdi-chevron-right"></i></span
          ></a>
          <ul class="nav-second-level" aria-expanded="false">
            <li class="nav-item">
              <a class="nav-link" href="all-employees.html"
                ><i class="ti-control-record"></i>All Employees</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="add-employee.html"
                ><i class="ti-control-record"></i>Add Employee</a
              >
            </li>
          </ul>
        </li>

        <li>
          <a href="javascript: void(0);"
            ><i class="ti-email"></i><span>Messages</span
            ><span class="menu-arrow"
              ><i class="mdi mdi-chevron-right"></i></span
          ></a>
          <ul class="nav-second-level" aria-expanded="false">
            <li class="nav-item">
              <a class="nav-link" href="all-messages.html"
                ><i class="ti-control-record"></i>All Messages</a
              >
            </li>
          </ul>
        </li>
        <li>
          <a href="javascript: void(0);"
            ><i class="ti-settings"></i><span>Profile</span
            ><span class="menu-arrow"
              ><i class="mdi mdi-chevron-right"></i></span
          ></a>
          <ul class="nav-second-level" aria-expanded="false">
            <li class="nav-item">
              <a class="nav-link" href="edit-profile.html"
                ><i class="ti-control-record"></i>Edit Profile</a
              >
            </li>
          </ul>
        </li>
      </ul>
    </div>
    <!-- end left-sidenav-->

    <div class="page-wrapper">
      <!-- Page Content-->
      <div class="page-content">
        <div class="container-fluid">
          <!-- Page-Title -->
          <div class="row">
            <div class="col-sm-12">
              <div class="page-title-box">
                <div class="float-right">
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                      <a href="javascript:void(0);">Messages</a>
                    </li>
                    <li class="breadcrumb-item">
                      <a href="javascript:void(0);">All Messages</a>
                    </li>
                  </ol>
                </div>
                <h4 class="page-title">All Rooms</h4>
              </div>
              <!--end page-title-box-->
            </div>
            <!--end col-->
          </div>
          <!-- end page title end breadcrumb -->

          <div class="row">
            <div class="col-12">
              <div class="card">
                <div class="msg"></div>
                <div class="card-body">
                  <table
                    id="datatable-buttons"
                    class="table table-striped table-bordered dt-responsive nowrap"
                    style="
                      border-collapse: collapse;
                      border-spacing: 0;
                      width: 100%;
                    "
                  >
                    <thead>
                      <tr>
                        <th>Msg ID</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone</th>
                        <th>Title</th>
                        <th>Message</th>
                        <th>Actions</th>
                      </tr>
                    </thead>

                    <tbody></tbody>
                  </table>
                </div>
              </div>
            </div>
            <!-- end col -->
          </div>
          <!-- end row -->
        </div>
        <!-- container -->
        <footer class="footer text-center text-sm-left">
          &copy; 2022 Royal Grand Hotel
          <span class="text-muted d-none d-sm-inline-block float-right"
            >Developed by Group 01</span
          >
        </footer>
        <!--end footer-->
      </div>
      <!-- end page content -->
    </div>
    <!-- end page-wrapper -->

    <!-- jQuery  -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery-ui.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/metismenu.min.js"></script>
    <script src="assets/js/waves.js"></script>
    <script src="assets/js/feather.min.js"></script>
    <script src="assets/js/jquery.slimscroll.min.js"></script>

    <!-- Required datatable js -->
    <script src="plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="plugins/datatables/dataTables.bootstrap4.min.js"></script>
    <!-- Buttons examples -->
    <script src="plugins/datatables/dataTables.buttons.min.js"></script>
    <script src="plugins/datatables/buttons.bootstrap4.min.js"></script>
    <script src="plugins/datatables/jszip.min.js"></script>
    <script src="plugins/datatables/pdfmake.min.js"></script>
    <script src="plugins/datatables/vfs_fonts.js"></script>
    <script src="plugins/datatables/buttons.html5.min.js"></script>
    <script src="plugins/datatables/buttons.print.min.js"></script>
    <script src="plugins/datatables/buttons.colVis.min.js"></script>
    <!-- Responsive examples -->
    <script src="plugins/datatables/dataTables.responsive.min.js"></script>
    <script src="plugins/datatables/responsive.bootstrap4.min.js"></script>
    <script src="assets/pages/jquery.datatable.init.js"></script>

    <!-- App js -->
    <script src="assets/js/app.js"></script>
    <script>
      $(document).ready(function () {
        var table = $("#datatable-buttons").DataTable();

        function getAllMessages() {
          table.clear().draw();
          $.ajax({
            url: "http://localhost:8080/messages/all",
            method: "get",
            success: function (data) {
              $.each(data, function (key, value) {
                console.log(value);
                table.row
                  .add([
                    "MSG : " + value.id,
                    value.name,
                    value.email,
                    value.phone,
                    value.title,
                    value.message,
                    `<button class='btn btn-danger delete' did=${value.id}>Delete</button>`,
                  ])
                  .draw();
              });
            },
          });
        }

        getAllMessages();

        $(document).on("click", ".delete", function () {
          var id = $(this).attr("did");

          $.ajax({
            url: `http://localhost:8080/messages/delete/${id}`,
            method: "delete",
            success: function (data) {
              getAllMessages();
              $(".msg").html(
                "<div class='alert alert-success' role='alert'>Successfuly Deleted!</div>"
              );
            },
          });
        });
      });
    </script>
  </body>
</html>
